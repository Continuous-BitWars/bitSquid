<div *ngIf="action && player && baseSrc && playerDest && playerSrc && baseDest">
  <div class="transfer-container">
    <div class="transfer-card">
      <!-- UUID Header -->
      <div class="uuid-header" [ngStyle]="{'--src-color': playerSrc.color, '--dest-color': playerDest.color}">
        <div class="uuid-text">{{action.uuid}}</div>
        <div class="uuid-overlay"></div>
      </div>

      <!-- Main Content -->
      <div class="content-grid">
        <!-- Source -->
        <div class="player-card source" [ngStyle]="{'--player-color': playerSrc.color}">
          <div class="player-name">
            <div class="color-dot"></div>
            ({{player.id}}) {{player.name}}
          </div>
          <div class="base-info">
            <i class="bi bi-crown"></i>
            ({{baseSrc.uid}}) {{baseSrc.name}}
          </div>
          <div class="coordinates">
            <i class="bi bi-geo-alt"></i>
            [{{baseSrc.position.x}}|{{baseSrc.position.y}}|{{baseSrc.position.z}}]
          </div>
        </div>

        <!-- Arrow -->
        <div class="arrow-container">
          <div class="arrow-overlay"></div>
          <i class="bi bi-arrow-right"></i>
          <div class="amount-text">
            <i class="bi bi-people"></i>
            {{action.amount}}
          </div>
        </div>

        <!-- Destination -->
        <div class="player-card destination" [ngStyle]="{'--player-color': playerDest.color}">
          <div class="player-name">
            <div class="color-dot"></div>
            ({{playerDest.id}}) {{playerDest.name}}
          </div>
          <div class="base-info">
            <i class="bi bi-crown"></i>
            ({{baseDest.uid}}) {{baseDest.name}}
          </div>
          <div class="coordinates">
            <i class="bi bi-geo-alt"></i>
            [{{baseDest.position.x}}|{{baseDest.position.y}}|{{baseDest.position.z}}]
          </div>
          <div class="stats">
          <span class="stat">
            <i class="bi bi-people"></i>
            {{baseDest.population}}
          </span>
            <span class="stat">
            <i class="bi bi-crown"></i>
            Level {{baseDest.level}}
          </span>
          </div>
        </div>
      </div>

      <!-- Progress Bar -->
      <div class="progress-section" [ngStyle]="{'--src-color': playerSrc.color, '--dest-color': playerDest.color}">
        <div class="progress-text">{{attackProgressText}}</div>
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="attackPercentage">
            <div class="shimmer"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
